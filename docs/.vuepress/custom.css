/* 
   优化建议：
   请尽量将以下 @import 内容移动到 .vuepress/config.ts 的 head 配置中，
   使用 <link rel="stylesheet"> 引入，性能会比 CSS @import 快很多。
*/
@import url("https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/style.min.css");
@import url("https://cdn.jsdelivr.net/npm/@fontsource/cascadia-code@4.2.1/index.min.css");
@import url("https://fonts.googleapis.com/css2?family=Ysabeau:ital,wght@1,1..1000&display=swap");

/* --- 字体定义 --- */
/* 使用 font-display: swap 避免文字隐形 (FOIT) */
@font-face {
  font-family: 'LXGW WenKai';
  src: url('https://cdn.jsdelivr.net/npm/lxgw-wenkai-webfont@1.7.0/fonts/LXGWWenKai-Regular.woff2') format('woff2');
  font-display: swap;
  unicode-range: U+4E00-9FFF;
  /* 仅对汉字生效，优化加载 */
}

@font-face {
  font-family: 'Cascadia Code';
  src: url('https://cdn.jsdelivr.net/npm/@fontsource/cascadia-code@4.2.1/files/cascadia-code-cyrillic-ext-400-normal.woff2') format('woff2');
  font-display: swap;
}

/* --- 全局变量与基础设置 --- */
:root {
  /* 字体栈优化：英文字体在前，中文字体在后 */
  --vp-font-family-base: "Ysabeau", "LXGW WenKai", "Segoe UI", "PingFang SC", "Microsoft YaHei", sans-serif;
  --vp-font-family-mono: "Cascadia Code", "Consolas", "Monaco", monospace;
  --vp-sidebar-width: 15rem;

  /* 动画相关变量 */
  --anim-dist: 15px;
  --anim-duration: 0.4s;
}

/* 
   BUG修复：不要使用 * 选择器，否则会覆盖 Iconify 等图标字体 
   只需设置 body，子元素会自动继承
*/
body {
  font-family: var(--vp-font-family-base);
  font-size: 17px;
  font-weight: 400;
  text-rendering: optimizeLegibility;
  font-feature-settings: "liga" 1, "dlig" 1, "tnum";
  -webkit-font-smoothing: antialiased;
}

/* 特殊字体区域 */
.tag-name,
.blog-post-item-content .post-meta,
.vp-category-group .folder,
.vp-doc-meta .tag,
.vp-footer,
.profile-info {
  font-family: "Ysabeau", "Inter", sans-serif;
}

/* 代码块字体修正 */
.vp-doc :is(pre, code) {
  font-family: var(--vp-font-family-mono);
  font-weight: 400;
  /* 略微增加代码粗细以提升可读性 */
  font-variant-ligatures: normal;
}

/* --- 背景与毛玻璃优化 --- */

/* 网格背景 */
.vp-doc-container {
  --vp-doc-grid-bg: rgba(64, 64, 64, 0.08);
  /* 稍微调淡，减少视觉干扰 */
  background-image:
    linear-gradient(90deg, var(--vp-doc-grid-bg) 1px, transparent 0),
    linear-gradient(1turn, var(--vp-doc-grid-bg) 1px, transparent 0);
  background-position: 50%;
  background-size: 24px 24px;
}

[data-theme="dark"] .vp-doc-container {
  --vp-doc-grid-bg: rgba(128, 128, 128, 0.08);
}

/* 透明化组件 */
.vp-footer {
  background-color: transparent !important;
  backdrop-filter: none !important;
}

/* 侧边栏 - 使用 CSS 变量便于维护 */
.vp-sidebar,
.vp-sidebar .curtain {
  background-color: rgba(255, 255, 255, 0.6) !important;
  /* 稍微增加不透明度以提升文字对比度 */
  backdrop-filter: blur(8px) !important;
  border-right: 1px solid rgba(0, 0, 0, 0.05);
  /* 增加微妙边界 */
}

[data-theme="dark"] :is(.vp-sidebar, .vp-sidebar .curtain) {
  background-color: rgba(30, 30, 30, 0.6) !important;
  border-right: 1px solid rgba(255, 255, 255, 0.05);
}

/* 隐藏 Waline 标示 */
.waline-powered-by,
.wl-power {
  display: none !important;
}

/* --- 卡片样式优化 --- */

/* 合并选择器，减少代码量 */
:is(.vp-card-wrapper, .vp-link-card) {
  background-color: rgba(255, 255, 255, 0.5) !important;
  border: 1px solid rgba(60, 60, 60, 0.1) !important;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04) !important;
  transition: transform 0.3s ease, box-shadow 0.3s ease, background-color 0.3s !important;
  will-change: transform;
  /* 性能优化：提示浏览器提前准备动画 */
}

[data-theme="dark"] :is(.vp-card-wrapper, .vp-link-card) {
  background-color: rgba(60, 60, 60, 0.2) !important;
  border-color: rgba(255, 255, 255, 0.1) !important;
}

/* Hover 态 */
:is(.vp-card-wrapper, .vp-link-card):hover {
  background-color: rgba(255, 255, 255, 0.8) !important;
  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08) !important;
  transform: translateY(-2px);
  /* 物理上浮效果 */
}

[data-theme="dark"] :is(.vp-card-wrapper, .vp-link-card):hover {
  background-color: rgba(80, 80, 80, 0.4) !important;
}

/* 链接卡片特殊边框 */
.vp-link-card:hover {
  border-color: var(--vp-c-brand-1) !important;
}

/* --- 进场动画系统 --- */

/* 
   BUG修复：
   不要默认 opacity: 0。如果 JS 挂了，用户什么都看不到。
   只有当 body 有 'page-loading' 类（加载中）时，我们才准备隐藏它们，
   或者利用 'page-loaded' 做增量显示。
   这里采用“默认可见，但如果有 loaded 类则重置动画”的策略，或者更安全的做法：
*/

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(var(--anim-dist));
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeInRight {
  from {
    opacity: 0;
    transform: translateX(calc(var(--anim-dist) * 1.5));
  }

  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* 只有当 body 拥有 page-loaded 类时，才触发内容区的动画 */
.page-loaded .vp-doc>* {
  animation: fadeInUp var(--anim-duration) ease-out backwards;
  /* backwards 确保动画开始前元素是隐藏的(opacity:0)，
     前提是元素默认样式没有 override opacity */
}

/* 
   简化选择器：
   不再列出 h1, p, ul... 而是直接选择 .vp-doc 的直接子元素。
   这更健壮，能覆盖未来可能添加的任何 HTML 标签。
*/

/* 基础延迟：前 5 个主要元素 */
.page-loaded .vp-doc>*:nth-child(1) {
  animation-delay: 0.05s;
}

.page-loaded .vp-doc>*:nth-child(2) {
  animation-delay: 0.1s;
}

.page-loaded .vp-doc>*:nth-child(3) {
  animation-delay: 0.15s;
}

.page-loaded .vp-doc>*:nth-child(4) {
  animation-delay: 0.2s;
}

.page-loaded .vp-doc>*:nth-child(5) {
  animation-delay: 0.25s;
}

/* 针对特定组件的精细化延迟（如果有嵌套） */
.page-loaded .vp-doc li:nth-child(-n+10),
.page-loaded .vp-card-wrapper:nth-child(-n+10),
.page-loaded .vp-link-card:nth-child(-n+10) {
  animation: fadeInUp var(--anim-duration) ease-out backwards;
}

/* 循环生成延迟 (手动模拟) - 减少了代码行数 */
.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(1) {
  animation-delay: 0.03s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(2) {
  animation-delay: 0.06s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(3) {
  animation-delay: 0.09s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(4) {
  animation-delay: 0.12s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(5) {
  animation-delay: 0.15s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(6) {
  animation-delay: 0.18s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(7) {
  animation-delay: 0.21s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(8) {
  animation-delay: 0.24s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(9) {
  animation-delay: 0.27s;
}

.page-loaded :is(li, .vp-card-wrapper, .vp-link-card):nth-child(10) {
  animation-delay: 0.30s;
}

/* 首页 Hero 区域动画 */
.page-loaded .VPhero :is(.text, .name, .tagline, .actions) {
  animation: fadeInUp var(--anim-duration) ease-out backwards;
}

.page-loaded .VPhero .name {
  animation-delay: 0.1s;
}

.page-loaded .VPhero .text {
  animation-delay: 0.2s;
}

.page-loaded .VPhero .tagline {
  animation-delay: 0.3s;
}

.page-loaded .VPhero .actions {
  animation-delay: 0.4s;
}

/* 侧边栏进场 */
.page-loaded .aside-container {
  animation: fadeInRight var(--anim-duration) ease-out backwards;
  animation-delay: 0.2s;
}

/* 
   无障碍优化：
   如果用户系统设置了“减弱动态效果”，则关闭所有自定义动画
*/
@media (prefers-reduced-motion: reduce) {

  *,
  ::before,
  ::after {
    animation-duration: 0.01s !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01s !important;
    scroll-behavior: auto !important;
  }
}